
<!DOCTYPE html>
<html lang="ja-JP">
<head>
  
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>index_category - 鉄は熱いうちに打て</title>
  
  <link rel="stylesheet" href="static/css/sample_article.css">

</head>

<body>
  
<div class="container">
  <h1 class="index-title">
    <a href="index.html">鉄は熱いうちに打て</a>
  </h1>

  <div class="container-inner">
    <div class="container-body">
      

  <div class="articles">
    
      <div class="article-metadata">
    <span class="article-date"> 2017-12-10 </span>
    <span> Python </span>
    <span> Python </span>
  </div>
      <h2 class="article-title"><a href="2017/2017-12-10-article.html">doctestを触ってみた</a></h2>
      <div class="article-body"><p>今日の内容は、<a href="http://kamekokamekame.net/advent_calendar/2017/12/18/article.html">Pythonでテストしたい</a>にまとめている内容の詳細部分です。</p>
<p>doctestを触ってみました。</p>
<p>sample.py</p>
<div class="codehilite"><pre><span></span><span class="sd">"""</span>
<span class="sd">値を1増加させる関数です</span>
<span class="sd">&gt;&gt;&gt; add_one(1)</span>
<span class="sd">2</span>
<span class="sd">"""</span>


<span class="k">def</span> <span class="nf">add_one</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    値が1増加します</span>
<span class="sd">    &gt;&gt;&gt; [add_one(x) for x in range(5)]</span>
<span class="sd">    [1, 2, 3, 4, 5]</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
<p>実行する</p>
<div class="codehilite"><pre><span></span>$ python sample.py
</pre></div>
<p>正常に動作した場合はなにも表示されない</p>
<p>sample.pyの14行目を <code>return x + 2</code> と書き換えて実行</p>
<div class="codehilite"><pre><span></span>$ python sample.py 
**********************************************************************
File <span class="s2">"sample.py"</span>, line <span class="m">3</span>, in __main__
Failed example:
    add_one<span class="o">(</span><span class="m">1</span><span class="o">)</span>
Expected:
    <span class="m">2</span>
Got:
    <span class="m">3</span>
**********************************************************************
File <span class="s2">"sample.py"</span>, line <span class="m">11</span>, in __main__.add_one
Failed example:
    <span class="o">[</span>add_one<span class="o">(</span>x<span class="o">)</span> <span class="k">for</span> x in range<span class="o">(</span><span class="m">5</span><span class="o">)]</span>
Expected:
    <span class="o">[</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span>, <span class="m">4</span>, <span class="m">5</span><span class="o">]</span>
Got:
    <span class="o">[</span><span class="m">2</span>, <span class="m">3</span>, <span class="m">4</span>, <span class="m">5</span>, <span class="m">6</span><span class="o">]</span>
**********************************************************************
<span class="m">2</span> items had failures:
   <span class="m">1</span> of   <span class="m">1</span> in __main__
   <span class="m">1</span> of   <span class="m">1</span> in __main__.add_one
***Test Failed*** <span class="m">2</span> failures.
</pre></div>
<p>エーラーが出ます。
正しい場合も実行時にオプション <code>-v</code> をつけるとテストの詳細が表示されます。</p>
<div class="codehilite"><pre><span></span>$ python sample.py -v
Trying:
    add_one<span class="o">(</span><span class="m">1</span><span class="o">)</span>
Expecting:
    <span class="m">2</span>
ok
Trying:
    <span class="o">[</span>add_one<span class="o">(</span>x<span class="o">)</span> <span class="k">for</span> x in range<span class="o">(</span><span class="m">5</span><span class="o">)]</span>
Expecting:
    <span class="o">[</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span>, <span class="m">4</span>, <span class="m">5</span><span class="o">]</span>
ok
<span class="m">2</span> items passed all tests:
   <span class="m">1</span> tests in __main__
   <span class="m">1</span> tests in __main__.add_one
<span class="m">2</span> tests in <span class="m">2</span> items.
<span class="m">2</span> passed and <span class="m">0</span> failed.
Test passed.
</pre></div>
<p>別のファイルにも書き出せるようです。</p>
<p>sample.txt</p>
<div class="codehilite"><pre><span></span>The ``sample`` module
==========================
Using ``add_one``
------------------------
First import ``add_one`` from the ``sample`` module:

    &gt;&gt;&gt; from sample9 import add_one

Now use it:

    &gt;&gt;&gt; add_one(1)
    2
</pre></div>
<p>sample.py</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_one</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testfile</span><span class="p">(</span><span class="s2">"sample.txt"</span><span class="p">)</span>
</pre></div>
<p>実行</p>
<div class="codehilite"><pre><span></span>$ python sample.py -v
Trying:
    from sample import add_one
Expecting nothing
ok
Trying:
    add_one(1)
Expecting:
    2
ok
1 items passed all tests:
   2 tests in sample.txt
2 tests in 1 items.
2 passed and 0 failed.
Test passed.
</pre></div>
<p>簡単な機能の関数のテストならこれで充分ですね。</p>
<div class="header_target" id="h_2017_2017_2d12_2d10_2darticle_2emd_1"></div><h2>参考リンク</h2>
<p>公式ドキュメント: <a href="https://docs.python.org/ja/3/library/doctest.html">doctest — 対話的な実行例をテストする</a> </p>
<div class="header_target" id="h_2017_2017_2d12_2d10_2darticle_2emd_2"></div><h2>参考図書</h2>
<p><a href="https://www.amazon.co.jp/Python-%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E5%8E%B3%E9%81%B8%E3%83%AC%E3%82%B7%E3%83%94-%E6%B1%A0%E5%86%85-%E5%AD%9D%E5%95%93/dp/4774177075/ref=as_li_ss_il?s=books&amp;ie=UTF8&amp;qid=1513461251&amp;sr=1-1&amp;keywords=python+%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA&amp;linkCode=li2&amp;tag=ironhotcom-22&amp;linkId=97da69f3c2938b7531280618fa17cb5f" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=4774177075&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=ironhotcom-22"/></a><img alt="" border="0" height="1" src="https://ir-jp.amazon-adsystem.com/e/ir?t=ironhotcom-22&amp;l=li2&amp;o=9&amp;a=4774177075" style="border:none !important; margin:0px !important;" width="1"/></p></div>
    
      <div class="article-metadata">
    <span class="article-date"> 2017-12-01 </span>
    <span> Python </span>
    <span> Python </span>
  </div>
      <h2 class="article-title"><a href="2017/2017-12-01-article.html">The Zen of Python</a></h2>
      <div class="article-body"><p>12月ですね。</p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_1"></div><h2>はじめに</h2>
<p>今年も今月で終わりですが、最後になにか学習をしたいと考えていました。
知らない言語を学んでみようかなと <code>Land of Lisp</code> という本を読んでみました。しかし、作者の他言語への並々ならぬ気持ちがすごかったので、受け止めきれなかったです。<code>Lisp</code> に関してはわかりやすかったです。読むまでは <code>Lisp</code> はカッコばっかりでとっつきにくいと思ったけどいい本でした。</p>
<p>そんな時、<a href="https://cronote.connpass.com/">くろのて勉強会</a>に参加しました。</p>
<ul>
<li>他言語学ぶほどPython知っているの？</li>
<li>おまえのPythonの知識は充分なの？</li>
</ul>
<p>と私の中のリトル亀子が問いかけてきます。</p>
<p>反省して、Python関連のことを1ヶ月勉強することにしました。</p>
<p>「全体的になんとなく知っている」から、「この部分は詳しい」になりたいです。そろそろ。</p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_2"></div><h2>The Zen of Python</h2>
<p>手始めに、ちゃんと読んだこと無い <code>The Zen of Python</code> を読みました。</p>
<p><strong>Pythonらしさ</strong> を開発者のピーターさんがまとめたものだそうです。</p>
<p><a href="https://www.python.org/dev/peps/pep-0020/">PEP 20 -- The Zen of Python</a> に書いてあります。</p>
<p>対話モードで <code>import this</code> と書くと見られます。便利ですね。</p>
<div class="codehilite"><pre><span></span>&gt;&gt;&gt; import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
</pre></div>
<p>書いてみた。出た。
探せば日本語訳が山ほど出てきますが、ヒントなしに訳してみます。あとで答え合わせしよう。</p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_3"></div><h2>ノーヒント翻訳</h2>
<ul>
<li>Beautiful is better than ugly.</li>
</ul>
<p>醜いより美しい方がいい。</p>
<ul>
<li>Explicit is better than implicit.</li>
</ul>
<p>自明な方が暗黙よりよい。</p>
<ul>
<li>Simple is better than complex.</li>
</ul>
<p>シンプルな方が複雑よりいい。</p>
<ul>
<li>Complex is better than complicated.</li>
</ul>
<p>複合はややこしいよりよい。（ちょっと意味がわからない）</p>
<ul>
<li>Flat is better than nested.</li>
</ul>
<p>ネストするよりフラットがいい。</p>
<ul>
<li>Sparse is better than dense.</li>
</ul>
<p>希薄なほうが密よりいい</p>
<ul>
<li>Readability counts.</li>
</ul>
<p>可読性は数える？</p>
<ul>
<li>Special cases aren't special enough to break the rules.</li>
</ul>
<p>ルールを破らないといけないほど特別なケースはない。</p>
<ul>
<li>Although practicality beats purity.</li>
</ul>
<p>実用性は純粋さを凌いだりする</p>
<ul>
<li>Errors should never pass silently.</li>
</ul>
<p>エラーは静かに過ぎさらせてはいけない</p>
<ul>
<li>Unless explicitly silenced.</li>
</ul>
<p>はっきりしていないことは無視してはいけない</p>
<ul>
<li>In the face of ambiguity, refuse the temptation to guess.</li>
</ul>
<p>曖昧さに直面すると、推測したくなる</p>
<ul>
<li>There should be one-- and preferably only one --obvious way to do it.</li>
</ul>
<p>何かをやる方法は一つであるべき、できればたったひとつがいい</p>
<ul>
<li>Although that way may not be obvious at first unless you're Dutch.</li>
</ul>
<p>あなたがオランダ人じゃないなら、その方法は最初から自明ではない（突然のオランダ人？）</p>
<ul>
<li>Now is better than never.</li>
</ul>
<p>やらないよりは今やるほうがいい</p>
<ul>
<li>Although never is often better than <em>right</em> now.</li>
</ul>
<p>しばしばやらないほうが今やるよりいい（右？今？なに？）</p>
<ul>
<li>If the implementation is hard to explain, it's a bad idea.</li>
</ul>
<p>実装を説明するのが難しい場合は、悪い実装をしている</p>
<ul>
<li>If the implementation is easy to explain, it may be a good idea.</li>
</ul>
<p>実装を説明するのが易しい場合、良い実装をしてる</p>
<ul>
<li>Namespaces are one honking great idea -- let's do more of those!</li>
</ul>
<p>名前空間は一つの素晴らしいアイデアだ、それ以上のことをしよう。</p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_4"></div><h2>答え合わせ</h2>
<p>ぐぐったら石本敦夫さんのブログに回答らしきものが載っていたので答え合わせ</p>
<p><a href="http://atsuoishimoto.hatenablog.com/entry/20100926/1285508015">The Zen of Python 解題 - 後編 - atsuoishimoto's diary</a></p>
<ul>
<li>Readability counts.</li>
</ul>
<p>「読みやすさが大切なのよ。」だそうです。
countsってどう訳されているの？わからない。</p>
<p>以外は、大体わかりました。ありがとう。石本さんのブログと訳してくれた方。</p>
<p>オランダ人はオランダ人だった。「ケチ」とか「細かい」的な裏の意味があるのかと思った。</p>
<p>禅は意味を考えてはいけない。そのまま受け取るものらしいです。（これは禅の話）</p>
<p>訳すまで有名な3つくらいしか認識してなかったけど、これ、いいこと言っているが、ピザでも食べながら書いたんじゃないの？と思う。</p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_5"></div><h2>今日の参考書籍:</h2>
<p><a href="https://www.amazon.co.jp/Python%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2-%E3%83%95%E3%82%A1%E3%83%BC%E3%82%B9%E3%83%88%E3%83%96%E3%83%83%E3%82%AF-%E9%88%B4%E6%9C%A8-%E3%81%9F%E3%81%8B%E3%81%AE%E3%82%8A/dp/4774192228/ref=as_li_ss_il?ie=UTF8&amp;qid=1510838827&amp;sr=8-1&amp;keywords=python%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2+%E3%83%95%E3%82%A1%E3%83%BC%E3%82%B9%E3%83%88%E3%83%96%E3%83%83%E3%82%AF&amp;linkCode=li1&amp;tag=ironhotcom-22&amp;linkId=17c6da3ee165ad97cf8d59d9743f5f2b" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=4774192228&amp;Format=_SL110_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=ironhotcom-22"/></a><img alt="" border="0" height="1" src="https://ir-jp.amazon-adsystem.com/e/ir?t=ironhotcom-22&amp;l=li1&amp;o=9&amp;a=4774192228" style="border:none !important; margin:0px !important;" width="1"/></p>
<div class="header_target" id="h_2017_2017_2d12_2d01_2darticle_2emd_6"></div><h2>追記</h2>
<p>Pythonのパパ、グイド・ヴァンロッサム（Guido van Rossum）さんがオランダ人だそうです。 <code>Pythonコミュニティでは "Benevolent Dictator for Life"（BDFL、慈悲深き終身独裁者）として知られ、Python開発を常に監督し決定を下す</code> ってwikipediaにあったので、「あいつが考えていることはあいつしか知らないよ」って感じなのかな。</p></div>
    
      <div class="article-metadata">
    <span class="article-date"> 2015-04-15 </span>
    <span> Python </span>
    <span> Python </span>
  </div>
      <h2 class="article-title"><a href="2015/2015-04-15-article.html">もう一回virtualenvの使い方</a></h2>
      <div class="article-body"><p>virtualenvの使い方を習得できていないというか、適当に検索して使ってみたけど、皆自分に都合がいいことしか書いてないのでわかりづらい。初心者に優しくない！</p>
<p>あと、余計なツールは逆にめんどくさい！！と思う。
ということで、普通に<a href="https://virtualenv.pypa.io/en/latest/index.html" target="_blank">virtualenvのドキュメント</a>を読みました。そうだ！私って英語読めるんだった！！</p>
<p>インストール</p>
<div class="codehilite"><pre><span></span>$ <span class="o">[</span>sudo<span class="o">]</span> pip install virtualenv
</pre></div>
<p>作成</p>
<div class="codehilite"><pre><span></span>$ virtualenv ENV
</pre></div>
<p>アクティブ化</p>
<div class="codehilite"><pre><span></span>$ <span class="nb">source</span> ENV/bin/activate
</pre></div>
<p>アクティブ解除</p>
<div class="codehilite"><pre><span></span>$ deactivate
</pre></div>
<p>システムデフォルト以外のPythonのバージョンを指定したい場合。</p>
<div class="codehilite"><pre><span></span>$ virtualenv -p <span class="p">&amp;</span><span class="c1">#123;他のPython&amp;#125; ENV</span>
</pre></div>
<p>環境の削除（普通に作ったディレクトリを削除するだけ）</p>
<div class="codehilite"><pre><span></span>$ rm -rf ENV 
</pre></div>
<p>以上！</p></div>
    
  </div>

  <div class="index-pagination">
    
      <a class="index-navi"
         href="index_category_category_Python_3.html">&larr;</a>
    
    
    
      <a class="index-navi"
         href="index_category_category_Python_5.html">&rarr;</a>
    
  </div>


    </div>
    <aside class="container-right">

      カテゴリ:
        
      <ul>
        
          <li>
            <a href="index_category_category_Advent@20Calendar.html">
              Advent Calendar
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Book.html">
              Book
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Event.html">
              Event
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Git.html">
              Git
            </a>
          </li>
        
          <li>
            <a href="index_category_category_OS.html">
              OS
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Other.html">
              Other
            </a>
          </li>
        
          <li>
            <a href="index_category_category_PyCon@20JP.html">
              PyCon JP
            </a>
          </li>
        
          <li>
            <a href="index_category_category_PyLadies.html">
              PyLadies
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Python.html">
              Python
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Sphinx.html">
              Sphinx
            </a>
          </li>
        
          <li>
            <a href="index_category_category_Web.html">
              Web
            </a>
          </li>
        
      </ul>
      <div>
        <br><br>
        <a href="//af.moshimo.com/af/c/click?a_id=767877&p_id=1166&pc_id=1793&pl_id=20229&guid=ON" target="_blank" rel="nofollow"><img src="//image.moshimo.com/af-img/0408/000000020229.png" width="250" height="250" style="border:none;"></a><img src="//i.moshimo.com/af/i/impression?a_id=767877&p_id=1166&pc_id=1793&pl_id=20229" width="1" height="1" style="border:none;">
        <br>
        <a href="//af.moshimo.com/af/c/click?a_id=767877&p_id=1166&pc_id=1793&pl_id=17971&guid=ON" target="_blank" rel="nofollow"><img src="//image.moshimo.com/af-img/0408/000000017971.png" width="250" height="250" style="border:none;"></a><img src="//i.moshimo.com/af/i/impression?a_id=767877&p_id=1166&pc_id=1793&pl_id=17971" width="1" height="1" style="border:none;">
      </div>
    </aside>
  </div>

</div>

</body>
</html>